{"_path":"/blog/nuxt3-i18n-setup","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Configuring Nuxt3 and @nuxtjs/i18n v8 Multilingual Module, and Common Pitfalls","description":"These days, I have been itching to refactor my blog using Nuxt3.7 and configure multi-language functionality using @nuxtjs/i18n v8. During the configuration process, I encountered some challenges, so I decided to write down some notes.","date":"2023-09-26 22:35","tags":["nuxt","tool"],"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These days, I have been itching to refactor my blog using Nuxt3.7 and configure multi-language functionality using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@nuxtjs/i18n"}]},{"type":"text","value":" v8. During the configuration process, I encountered some challenges, so I decided to write down some notes."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These days, I have been itching to refactor my blog using Nuxt3.7 and configure multi-language functionality using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@nuxtjs/i18n"}]},{"type":"text","value":" v8. During the configuration process, I encountered some challenges, so I decided to write down some notes."}]},{"type":"element","tag":"h2","props":{"id":"routing"},"children":[{"type":"text","value":"Routing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I wanted to add language-prefixed routes for the existing routes. For example, after adding the language "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"en"}]},{"type":"text","value":", the home page should automatically register the route "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/en"}]},{"type":"text","value":". After configuring according to the official documentation, everything else was working fine except for the routes. By the way, Nuxt comes with a built-in in-browser development tool that allows you to view the registered routes. You can click on the floating Nuxt icon on the page or press the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Shift+Alt+D"}]},{"type":"text","value":" key combination to open it."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After a few hours of tinkering, I finally succeeded. As for why I had to do it this way, I have no idea. Here's how I wrote it in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt.config.ts/js"}]},{"type":"text","value":":"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes solarized-light github-dark monokai","code":"i18n: {\n  locales: [\"en\", \"zh\"], // used in URL path prefix\n  defaultLocale: \"en\", // default locale of your project for Nuxt pages and routings\n}\n","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#B392F0;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"i18n"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#B392F0;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"  locales"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"en\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"zh\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#93A1A1;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-default-font-style:italic;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit"},"children":[{"type":"text","value":"// used in URL path prefix\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#B392F0;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"  defaultLocale"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"en\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#93A1A1;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-default-font-style:italic;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit"},"children":[{"type":"text","value":"// default locale of your project for Nuxt pages and routings\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This means that "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"locales"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defaultLocale"}]},{"type":"text","value":" should be written in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":", while the rest of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@nuxtjs/i18n"}]},{"type":"text","value":" configuration is written in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"i18n.config.ts"}]},{"type":"text","value":". This configuration works fine. Previously, I had all the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@nuxtjs/i18n"}]},{"type":"text","value":" configuration written in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"i18n.config.ts"}]},{"type":"text","value":", which caused the issue of not adding routes for other languages."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@nuxtjs/i18n"}]},{"type":"text","value":" has several routing strategies, and I am using the default strategy here."}]},{"type":"element","tag":"h2","props":{"id":"nuxt-generate"},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There was a bug in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@nuxtjs/i18n"}]},{"type":"text","value":" version I used these days. When running "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":", an error occurred. Installing the latest version fixed the issue."}]},{"type":"element","tag":"pre","props":{"className":"language-json shiki shiki-themes solarized-light github-dark monokai","code":"\"@nuxtjs/i18n\": \"npm:@nuxtjs/i18n-edge\"\n\n","language":"json","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"@nuxtjs/i18n\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"npm:@nuxtjs/i18n-edge\"\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"link-component"},"children":[{"type":"text","value":"Link Component"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@nuxtjs/i18n"}]},{"type":"text","value":" provides the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"useLocalePath"}]},{"type":"text","value":" function for translating links. However, it was cumbersome to import it every time it was used. So, I tried to write a component that could automatically translate links. But halfway through, I discovered that it already exists and is called "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"NuxtLinkLocale"}]},{"type":"text","value":". I must say, this component is not mentioned on the page where the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"useLocalePath"}]},{"type":"text","value":" function is documented, nor is it included in the navigation menu on the left sidebar."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"routing","depth":2,"text":"Routing"},{"id":"nuxt-generate","depth":2,"text":"nuxt generate"},{"id":"link-component","depth":2,"text":"Link Component"}]}},"_type":"markdown","_id":"content:blog:nuxt3 i18n setup.md","_source":"content","_file":"blog/nuxt3 i18n setup.md","_extension":"md"}