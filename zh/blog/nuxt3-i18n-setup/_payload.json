[{"data":1,"prerenderedAt":372},["Reactive",2],{"content-query-wI7b1Ie5DK":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"tags":11,"excerpt":14,"body":34,"_type":367,"_id":368,"_source":369,"_file":370,"_extension":371},"/zh/blog/nuxt3-i18n-setup","blog",false,"","配置Nuxt3和@nuxtjs/i18n多语言模块，及容易出错的地方","这几天心痒痒用 Nuxt3.7 重构了博客，使用@nuxtjs/i18n v8 配置多语言功能。配置过程中遇到了一些坑，写点文字记录一下。","2023-09-26 22:35",[12,13],"nuxt","tool",{"type":15,"children":16},"root",[17],{"type":18,"tag":19,"props":20,"children":21},"element","p",{},[22,25,32],{"type":23,"value":24},"text","这几天心痒痒用 Nuxt3.7 重构了博客，使用",{"type":18,"tag":26,"props":27,"children":29},"code",{"className":28},[],[30],{"type":23,"value":31},"@nuxtjs/i18n",{"type":23,"value":33}," v8 配置多语言功能。配置过程中遇到了一些坑，写点文字记录一下。",{"type":15,"children":35,"toc":362},[36,46,52,81,94,199,257,267,273,292,318,323,356],{"type":18,"tag":19,"props":37,"children":38},{},[39,40,45],{"type":23,"value":24},{"type":18,"tag":26,"props":41,"children":43},{"className":42},[],[44],{"type":23,"value":31},{"type":23,"value":33},{"type":18,"tag":47,"props":48,"children":50},"h2",{"id":49},"路由",[51],{"type":23,"value":49},{"type":18,"tag":19,"props":53,"children":54},{},[55,57,63,65,71,73,79],{"type":23,"value":56},"我想要为已经有的路由增加对应其他语言的带有语言前缀的路由，例如增加语言",{"type":18,"tag":26,"props":58,"children":60},{"className":59},[],[61],{"type":23,"value":62},"en",{"type":23,"value":64},"后，应该自动为首页注册路由",{"type":18,"tag":26,"props":66,"children":68},{"className":67},[],[69],{"type":23,"value":70},"/en",{"type":23,"value":72},"。按照官方文档配置后，其他功能都正常，就是路由没增加。顺带提一下，Nuxt 默认内置了页内开发工具，可以查看注册了哪些路由，点击页面上漂浮的 Nuxt 图标或在网页内按组合键",{"type":18,"tag":26,"props":74,"children":76},{"className":75},[],[77],{"type":23,"value":78},"Shift+Alt+D",{"type":23,"value":80},"打开。",{"type":18,"tag":19,"props":82,"children":83},{},[84,86,92],{"type":23,"value":85},"折腾了几个小时后还是成功了，至于为什么要这么做，那就不知道了。在",{"type":18,"tag":26,"props":87,"children":89},{"className":88},[],[90],{"type":23,"value":91},"nuxt.config.ts/js",{"type":23,"value":93},"中这样写：",{"type":18,"tag":95,"props":96,"children":100},"pre",{"className":97,"code":98,"language":99,"meta":7,"style":7},"language-ts shiki shiki-themes solarized-light github-dark monokai","i18n: {\n  locales: [\"en\", \"zh\"], // used in URL path prefix\n  defaultLocale: \"en\", // default locale of your project for Nuxt pages and routings\n}\n","ts",[101],{"type":18,"tag":26,"props":102,"children":103},{"__ignoreMap":7},[104,122,163,190],{"type":18,"tag":105,"props":106,"children":109},"span",{"class":107,"line":108},"line",1,[110,116],{"type":18,"tag":105,"props":111,"children":113},{"style":112},"--shiki-default:#657B83;--shiki-dark:#B392F0;--shiki-sepia:#F8F8F2",[114],{"type":23,"value":115},"i18n",{"type":18,"tag":105,"props":117,"children":119},{"style":118},"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[120],{"type":23,"value":121},": {\n",{"type":18,"tag":105,"props":123,"children":125},{"class":107,"line":124},2,[126,131,136,142,147,152,157],{"type":18,"tag":105,"props":127,"children":128},{"style":112},[129],{"type":23,"value":130},"  locales",{"type":18,"tag":105,"props":132,"children":133},{"style":118},[134],{"type":23,"value":135},": [",{"type":18,"tag":105,"props":137,"children":139},{"style":138},"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[140],{"type":23,"value":141},"\"en\"",{"type":18,"tag":105,"props":143,"children":144},{"style":118},[145],{"type":23,"value":146},", ",{"type":18,"tag":105,"props":148,"children":149},{"style":138},[150],{"type":23,"value":151},"\"zh\"",{"type":18,"tag":105,"props":153,"children":154},{"style":118},[155],{"type":23,"value":156},"], ",{"type":18,"tag":105,"props":158,"children":160},{"style":159},"--shiki-default:#93A1A1;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-default-font-style:italic;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[161],{"type":23,"value":162},"// used in URL path prefix\n",{"type":18,"tag":105,"props":164,"children":166},{"class":107,"line":165},3,[167,172,177,181,185],{"type":18,"tag":105,"props":168,"children":169},{"style":112},[170],{"type":23,"value":171},"  defaultLocale",{"type":18,"tag":105,"props":173,"children":174},{"style":118},[175],{"type":23,"value":176},": ",{"type":18,"tag":105,"props":178,"children":179},{"style":138},[180],{"type":23,"value":141},{"type":18,"tag":105,"props":182,"children":183},{"style":118},[184],{"type":23,"value":146},{"type":18,"tag":105,"props":186,"children":187},{"style":159},[188],{"type":23,"value":189},"// default locale of your project for Nuxt pages and routings\n",{"type":18,"tag":105,"props":191,"children":193},{"class":107,"line":192},4,[194],{"type":18,"tag":105,"props":195,"children":196},{"style":118},[197],{"type":23,"value":198},"}\n",{"type":18,"tag":19,"props":200,"children":201},{},[202,204,210,212,218,220,226,228,233,235,241,243,248,250,255],{"type":23,"value":203},"也就是说",{"type":18,"tag":26,"props":205,"children":207},{"className":206},[],[208],{"type":23,"value":209},"locales",{"type":23,"value":211},"和",{"type":18,"tag":26,"props":213,"children":215},{"className":214},[],[216],{"type":23,"value":217},"defaultLocale",{"type":23,"value":219},"要写在",{"type":18,"tag":26,"props":221,"children":223},{"className":222},[],[224],{"type":23,"value":225},"nuxt.config",{"type":23,"value":227},"里，其他",{"type":18,"tag":26,"props":229,"children":231},{"className":230},[],[232],{"type":23,"value":31},{"type":23,"value":234},"的配置我写在了",{"type":18,"tag":26,"props":236,"children":238},{"className":237},[],[239],{"type":23,"value":240},"i18n.config.ts",{"type":23,"value":242},"里。这样配置是可以正常工作的。之前我把",{"type":18,"tag":26,"props":244,"children":246},{"className":245},[],[247],{"type":23,"value":31},{"type":23,"value":249},"的配置全写在",{"type":18,"tag":26,"props":251,"children":253},{"className":252},[],[254],{"type":23,"value":240},{"type":23,"value":256},"里，就出现了上面的问题，即没有增加其他语言的路由。",{"type":18,"tag":19,"props":258,"children":259},{},[260,265],{"type":18,"tag":26,"props":261,"children":263},{"className":262},[],[264],{"type":23,"value":31},{"type":23,"value":266},"有几种路由策略，这里使用的是默认策略。",{"type":18,"tag":47,"props":268,"children":270},{"id":269},"nuxt-generate",[271],{"type":23,"value":272},"nuxt generate",{"type":18,"tag":19,"props":274,"children":275},{},[276,278,283,285,290],{"type":23,"value":277},"这几天的",{"type":18,"tag":26,"props":279,"children":281},{"className":280},[],[282],{"type":23,"value":31},{"type":23,"value":284},"版本有 bug，当执行",{"type":18,"tag":26,"props":286,"children":288},{"className":287},[],[289],{"type":23,"value":272},{"type":23,"value":291},"时会出错，安装最新版就好了。",{"type":18,"tag":95,"props":293,"children":297},{"className":294,"code":295,"language":296,"meta":7,"style":7},"language-json shiki shiki-themes solarized-light github-dark monokai","\"@nuxtjs/i18n\": \"npm:@nuxtjs/i18n-edge\"\n","json",[298],{"type":18,"tag":26,"props":299,"children":300},{"__ignoreMap":7},[301],{"type":18,"tag":105,"props":302,"children":303},{"class":107,"line":108},[304,309,313],{"type":18,"tag":105,"props":305,"children":306},{"style":138},[307],{"type":23,"value":308},"\"@nuxtjs/i18n\"",{"type":18,"tag":105,"props":310,"children":311},{"style":118},[312],{"type":23,"value":176},{"type":18,"tag":105,"props":314,"children":315},{"style":138},[316],{"type":23,"value":317},"\"npm:@nuxtjs/i18n-edge\"\n",{"type":18,"tag":47,"props":319,"children":321},{"id":320},"链接组件",[322],{"type":23,"value":320},{"type":18,"tag":19,"props":324,"children":325},{},[326,331,333,339,341,347,349,354],{"type":18,"tag":26,"props":327,"children":329},{"className":328},[],[330],{"type":23,"value":31},{"type":23,"value":332},"提供了函数",{"type":18,"tag":26,"props":334,"children":336},{"className":335},[],[337],{"type":23,"value":338},"useLocalePath",{"type":23,"value":340},"以翻译链接。但是每个使用到的地方都要引入一次太麻烦了。我就尝试写一个可以自动翻译链接的组件，写一半的时候发现它已经提供了，叫做",{"type":18,"tag":26,"props":342,"children":344},{"className":343},[],[345],{"type":23,"value":346},"NuxtLinkLocale",{"type":23,"value":348},"。我想吐槽的是，这个组件在",{"type":18,"tag":26,"props":350,"children":352},{"className":351},[],[353],{"type":23,"value":338},{"type":23,"value":355},"函数的页面没有提到，也不在左边栏的导航菜单里。",{"type":18,"tag":357,"props":358,"children":359},"style",{},[360],{"type":23,"value":361},"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":7,"searchDepth":124,"depth":124,"links":363},[364,365,366],{"id":49,"depth":124,"text":49},{"id":269,"depth":124,"text":272},{"id":320,"depth":124,"text":320},"markdown","content:zh:blog:nuxt3 i18n setup.md","content","zh/blog/nuxt3 i18n setup.md","md",1706852440122]