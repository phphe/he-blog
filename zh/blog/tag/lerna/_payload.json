[{"data":1,"prerenderedAt":552},["Reactive",2],{"content-query-e66sYNMDHB":3},[4],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":9,"description":10,"date":11,"tags":12,"body":15,"_type":547,"_id":548,"_source":549,"_file":550,"_extension":551},"/zh/blog/conventional-changelog-for-lerna-5-and-6","blog",false,"","Lerna 5/6 配置对话式更新日志（Conventional Changelog）","配置lerna，并增加对话式更新日志（Conventional Changelog）。","2023-03-02 01:09",[13,14],"lerna","tool",{"type":16,"children":17,"toc":544},"root",[18,46,52,57,369,374,487,500,538],{"type":19,"tag":20,"props":21,"children":22},"element","p",{},[23,26,35,37,44],{"type":24,"value":25},"text","之前，我使用",{"type":19,"tag":27,"props":28,"children":32},"a",{"href":29,"rel":30},"https://github.com/atlassian/cz-lerna-changelog",[31],"nofollow",[33],{"type":24,"value":34},"cz-lerna-changelog",{"type":24,"value":36},"。问题是这个库很久不更新了，而且仅适用于 lerna 3 及更早版本。所以我创建了",{"type":19,"tag":27,"props":38,"children":41},{"href":39,"rel":40},"https://github.com/phphe/cz-conventional-changelog-lerna",[31],[42],{"type":24,"value":43},"cz-conventional-changelog-lerna",{"type":24,"value":45},"。它适用于 lerna 5 及以后的版本。",{"type":19,"tag":47,"props":48,"children":50},"h2",{"id":49},"使用示例",[51],{"type":24,"value":49},{"type":19,"tag":20,"props":53,"children":54},{},[55],{"type":24,"value":56},"项目根目录下的 package.json",{"type":19,"tag":58,"props":59,"children":63},"pre",{"className":60,"code":61,"language":62,"meta":8,"style":8},"language-json shiki shiki-themes solarized-light github-dark monokai","{\n  \"name\": \"root\",\n  \"private\": true,\n  \"workspaces\": [\"packages/*\"],\n  \"devDependencies\": {\n    \"commitizen\": \"^4.1.2\",\n    \"cz-conventional-changelog-lerna\": \"^0.1.0\",\n    \"lerna\": \"^5.0.0\"\n  },\n  \"scripts\": {\n    \"commit\": \"cz\",\n    \"commit-all\": \"git add . && cz\"\n  },\n  \"config\": {\n    \"commitizen\": {\n      \"path\": \"./node_modules/cz-conventional-changelog-lerna\"\n    }\n  }\n}\n","json",[64],{"type":19,"tag":65,"props":66,"children":67},"code",{"__ignoreMap":8},[68,80,106,129,153,167,189,211,229,238,251,273,291,299,312,324,342,351,360],{"type":19,"tag":69,"props":70,"children":73},"span",{"class":71,"line":72},"line",1,[74],{"type":19,"tag":69,"props":75,"children":77},{"style":76},"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[78],{"type":24,"value":79},"{\n",{"type":19,"tag":69,"props":81,"children":83},{"class":71,"line":82},2,[84,90,95,101],{"type":19,"tag":69,"props":85,"children":87},{"style":86},"--shiki-default:#859900;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[88],{"type":24,"value":89},"  \"name\"",{"type":19,"tag":69,"props":91,"children":92},{"style":76},[93],{"type":24,"value":94},": ",{"type":19,"tag":69,"props":96,"children":98},{"style":97},"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#CFCFC2",[99],{"type":24,"value":100},"\"root\"",{"type":19,"tag":69,"props":102,"children":103},{"style":76},[104],{"type":24,"value":105},",\n",{"type":19,"tag":69,"props":107,"children":109},{"class":71,"line":108},3,[110,115,119,125],{"type":19,"tag":69,"props":111,"children":112},{"style":86},[113],{"type":24,"value":114},"  \"private\"",{"type":19,"tag":69,"props":116,"children":117},{"style":76},[118],{"type":24,"value":94},{"type":19,"tag":69,"props":120,"children":122},{"style":121},"--shiki-default:#B58900;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[123],{"type":24,"value":124},"true",{"type":19,"tag":69,"props":126,"children":127},{"style":76},[128],{"type":24,"value":105},{"type":19,"tag":69,"props":130,"children":132},{"class":71,"line":131},4,[133,138,143,148],{"type":19,"tag":69,"props":134,"children":135},{"style":86},[136],{"type":24,"value":137},"  \"workspaces\"",{"type":19,"tag":69,"props":139,"children":140},{"style":76},[141],{"type":24,"value":142},": [",{"type":19,"tag":69,"props":144,"children":145},{"style":97},[146],{"type":24,"value":147},"\"packages/*\"",{"type":19,"tag":69,"props":149,"children":150},{"style":76},[151],{"type":24,"value":152},"],\n",{"type":19,"tag":69,"props":154,"children":156},{"class":71,"line":155},5,[157,162],{"type":19,"tag":69,"props":158,"children":159},{"style":86},[160],{"type":24,"value":161},"  \"devDependencies\"",{"type":19,"tag":69,"props":163,"children":164},{"style":76},[165],{"type":24,"value":166},": {\n",{"type":19,"tag":69,"props":168,"children":170},{"class":71,"line":169},6,[171,176,180,185],{"type":19,"tag":69,"props":172,"children":173},{"style":86},[174],{"type":24,"value":175},"    \"commitizen\"",{"type":19,"tag":69,"props":177,"children":178},{"style":76},[179],{"type":24,"value":94},{"type":19,"tag":69,"props":181,"children":182},{"style":97},[183],{"type":24,"value":184},"\"^4.1.2\"",{"type":19,"tag":69,"props":186,"children":187},{"style":76},[188],{"type":24,"value":105},{"type":19,"tag":69,"props":190,"children":192},{"class":71,"line":191},7,[193,198,202,207],{"type":19,"tag":69,"props":194,"children":195},{"style":86},[196],{"type":24,"value":197},"    \"cz-conventional-changelog-lerna\"",{"type":19,"tag":69,"props":199,"children":200},{"style":76},[201],{"type":24,"value":94},{"type":19,"tag":69,"props":203,"children":204},{"style":97},[205],{"type":24,"value":206},"\"^0.1.0\"",{"type":19,"tag":69,"props":208,"children":209},{"style":76},[210],{"type":24,"value":105},{"type":19,"tag":69,"props":212,"children":214},{"class":71,"line":213},8,[215,220,224],{"type":19,"tag":69,"props":216,"children":217},{"style":86},[218],{"type":24,"value":219},"    \"lerna\"",{"type":19,"tag":69,"props":221,"children":222},{"style":76},[223],{"type":24,"value":94},{"type":19,"tag":69,"props":225,"children":226},{"style":97},[227],{"type":24,"value":228},"\"^5.0.0\"\n",{"type":19,"tag":69,"props":230,"children":232},{"class":71,"line":231},9,[233],{"type":19,"tag":69,"props":234,"children":235},{"style":76},[236],{"type":24,"value":237},"  },\n",{"type":19,"tag":69,"props":239,"children":241},{"class":71,"line":240},10,[242,247],{"type":19,"tag":69,"props":243,"children":244},{"style":86},[245],{"type":24,"value":246},"  \"scripts\"",{"type":19,"tag":69,"props":248,"children":249},{"style":76},[250],{"type":24,"value":166},{"type":19,"tag":69,"props":252,"children":254},{"class":71,"line":253},11,[255,260,264,269],{"type":19,"tag":69,"props":256,"children":257},{"style":86},[258],{"type":24,"value":259},"    \"commit\"",{"type":19,"tag":69,"props":261,"children":262},{"style":76},[263],{"type":24,"value":94},{"type":19,"tag":69,"props":265,"children":266},{"style":97},[267],{"type":24,"value":268},"\"cz\"",{"type":19,"tag":69,"props":270,"children":271},{"style":76},[272],{"type":24,"value":105},{"type":19,"tag":69,"props":274,"children":276},{"class":71,"line":275},12,[277,282,286],{"type":19,"tag":69,"props":278,"children":279},{"style":86},[280],{"type":24,"value":281},"    \"commit-all\"",{"type":19,"tag":69,"props":283,"children":284},{"style":76},[285],{"type":24,"value":94},{"type":19,"tag":69,"props":287,"children":288},{"style":97},[289],{"type":24,"value":290},"\"git add . && cz\"\n",{"type":19,"tag":69,"props":292,"children":294},{"class":71,"line":293},13,[295],{"type":19,"tag":69,"props":296,"children":297},{"style":76},[298],{"type":24,"value":237},{"type":19,"tag":69,"props":300,"children":302},{"class":71,"line":301},14,[303,308],{"type":19,"tag":69,"props":304,"children":305},{"style":86},[306],{"type":24,"value":307},"  \"config\"",{"type":19,"tag":69,"props":309,"children":310},{"style":76},[311],{"type":24,"value":166},{"type":19,"tag":69,"props":313,"children":315},{"class":71,"line":314},15,[316,320],{"type":19,"tag":69,"props":317,"children":318},{"style":86},[319],{"type":24,"value":175},{"type":19,"tag":69,"props":321,"children":322},{"style":76},[323],{"type":24,"value":166},{"type":19,"tag":69,"props":325,"children":327},{"class":71,"line":326},16,[328,333,337],{"type":19,"tag":69,"props":329,"children":330},{"style":86},[331],{"type":24,"value":332},"      \"path\"",{"type":19,"tag":69,"props":334,"children":335},{"style":76},[336],{"type":24,"value":94},{"type":19,"tag":69,"props":338,"children":339},{"style":97},[340],{"type":24,"value":341},"\"./node_modules/cz-conventional-changelog-lerna\"\n",{"type":19,"tag":69,"props":343,"children":345},{"class":71,"line":344},17,[346],{"type":19,"tag":69,"props":347,"children":348},{"style":76},[349],{"type":24,"value":350},"    }\n",{"type":19,"tag":69,"props":352,"children":354},{"class":71,"line":353},18,[355],{"type":19,"tag":69,"props":356,"children":357},{"style":76},[358],{"type":24,"value":359},"  }\n",{"type":19,"tag":69,"props":361,"children":363},{"class":71,"line":362},19,[364],{"type":19,"tag":69,"props":365,"children":366},{"style":76},[367],{"type":24,"value":368},"}\n",{"type":19,"tag":20,"props":370,"children":371},{},[372],{"type":24,"value":373},"lerna.json",{"type":19,"tag":58,"props":375,"children":377},{"className":60,"code":376,"language":62,"meta":8,"style":8},"{\n  \"packages\": [\"packages/*\"],\n  \"command\": {\n    \"version\": {\n      \"conventionalCommits\": true\n    }\n  },\n  \"version\": \"independent\"\n}\n",[378],{"type":19,"tag":65,"props":379,"children":380},{"__ignoreMap":8},[381,388,408,420,432,449,456,463,480],{"type":19,"tag":69,"props":382,"children":383},{"class":71,"line":72},[384],{"type":19,"tag":69,"props":385,"children":386},{"style":76},[387],{"type":24,"value":79},{"type":19,"tag":69,"props":389,"children":390},{"class":71,"line":82},[391,396,400,404],{"type":19,"tag":69,"props":392,"children":393},{"style":86},[394],{"type":24,"value":395},"  \"packages\"",{"type":19,"tag":69,"props":397,"children":398},{"style":76},[399],{"type":24,"value":142},{"type":19,"tag":69,"props":401,"children":402},{"style":97},[403],{"type":24,"value":147},{"type":19,"tag":69,"props":405,"children":406},{"style":76},[407],{"type":24,"value":152},{"type":19,"tag":69,"props":409,"children":410},{"class":71,"line":108},[411,416],{"type":19,"tag":69,"props":412,"children":413},{"style":86},[414],{"type":24,"value":415},"  \"command\"",{"type":19,"tag":69,"props":417,"children":418},{"style":76},[419],{"type":24,"value":166},{"type":19,"tag":69,"props":421,"children":422},{"class":71,"line":131},[423,428],{"type":19,"tag":69,"props":424,"children":425},{"style":86},[426],{"type":24,"value":427},"    \"version\"",{"type":19,"tag":69,"props":429,"children":430},{"style":76},[431],{"type":24,"value":166},{"type":19,"tag":69,"props":433,"children":434},{"class":71,"line":155},[435,440,444],{"type":19,"tag":69,"props":436,"children":437},{"style":86},[438],{"type":24,"value":439},"      \"conventionalCommits\"",{"type":19,"tag":69,"props":441,"children":442},{"style":76},[443],{"type":24,"value":94},{"type":19,"tag":69,"props":445,"children":446},{"style":121},[447],{"type":24,"value":448},"true\n",{"type":19,"tag":69,"props":450,"children":451},{"class":71,"line":169},[452],{"type":19,"tag":69,"props":453,"children":454},{"style":76},[455],{"type":24,"value":350},{"type":19,"tag":69,"props":457,"children":458},{"class":71,"line":191},[459],{"type":19,"tag":69,"props":460,"children":461},{"style":76},[462],{"type":24,"value":237},{"type":19,"tag":69,"props":464,"children":465},{"class":71,"line":213},[466,471,475],{"type":19,"tag":69,"props":467,"children":468},{"style":86},[469],{"type":24,"value":470},"  \"version\"",{"type":19,"tag":69,"props":472,"children":473},{"style":76},[474],{"type":24,"value":94},{"type":19,"tag":69,"props":476,"children":477},{"style":97},[478],{"type":24,"value":479},"\"independent\"\n",{"type":19,"tag":69,"props":481,"children":482},{"class":71,"line":231},[483],{"type":19,"tag":69,"props":484,"children":485},{"style":76},[486],{"type":24,"value":368},{"type":19,"tag":20,"props":488,"children":489},{},[490,492,498],{"type":24,"value":491},"提交 git commit 时，首先添加更改到缓冲区（git add），然后执行",{"type":19,"tag":65,"props":493,"children":495},{"className":494},[],[496],{"type":24,"value":497},"npm run commit",{"type":24,"value":499},"，根据提示填写信息并完成提交。",{"type":19,"tag":20,"props":501,"children":502},{},[503,505,511,513,519,521,527,529,536],{"type":24,"value":504},"执行",{"type":19,"tag":65,"props":506,"children":508},{"className":507},[],[509],{"type":24,"value":510},"lerna version",{"type":24,"value":512},"或",{"type":19,"tag":65,"props":514,"children":516},{"className":515},[],[517],{"type":24,"value":518},"lerna publish",{"type":24,"value":520},"时会在 package 目录自动生成",{"type":19,"tag":65,"props":522,"children":524},{"className":523},[],[525],{"type":24,"value":526},"CHANGELOG.md",{"type":24,"value":528},". 可以参考我的项目: ",{"type":19,"tag":27,"props":530,"children":533},{"href":531,"rel":532},"https://github.com/phphe/he-tree",[31],[534],{"type":24,"value":535},"he-tree: Vue 可拖拽树组件",{"type":24,"value":537},".",{"type":19,"tag":539,"props":540,"children":541},"style",{},[542],{"type":24,"value":543},"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":8,"searchDepth":82,"depth":82,"links":545},[546],{"id":49,"depth":82,"text":49},"markdown","content:zh:blog:Conventional Changelog for Lerna 5 and 6.md","content","zh/blog/Conventional Changelog for Lerna 5 and 6.md","md",1706852441248]