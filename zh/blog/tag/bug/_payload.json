[{"data":1,"prerenderedAt":391},["Reactive",2],{"content-query-LDJlfRUC7h":3},[4],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":9,"description":10,"date":11,"tags":12,"body":16,"_type":386,"_id":387,"_source":388,"_file":389,"_extension":390},"/zh/blog/forwardref-generics","blog",false,"","React使用fowardRef导致丢失组件泛型","React 中使用 fowardRef 包裹组件后，会丢失组件的泛型。这是个 bug。解决办法，使用修复的 fowardRef 函数类型覆盖原来的。","2024-02-02 13:30",[13,14,15],"react","typescript","bug",{"type":17,"children":18,"toc":384},"root",[19,26,378],{"type":20,"tag":21,"props":22,"children":23},"element","p",{},[24],{"type":25,"value":10},"text",{"type":20,"tag":27,"props":28,"children":32},"pre",{"className":29,"code":30,"language":31,"meta":8,"style":8},"language-ts shiki shiki-themes solarized-light github-dark monokai","import React from \"react\";\n\ntype FixedForwardRef = \u003CT, P = {}>(\n  render: (props: P, ref: React.Ref\u003CT>) => React.ReactElement | null\n) => (props: P & React.RefAttributes\u003CT>) => React.ReactElement | null;\n\nconst forwardRef = React.forwardRef as FixedForwardRef;\n","ts",[33],{"type":20,"tag":34,"props":35,"children":36},"code",{"__ignoreMap":8},[37,72,82,132,237,325,333],{"type":20,"tag":38,"props":39,"children":42},"span",{"class":40,"line":41},"line",1,[43,49,55,60,66],{"type":20,"tag":38,"props":44,"children":46},{"style":45},"--shiki-default:#859900;--shiki-dark:#F97583;--shiki-sepia:#F92672",[47],{"type":25,"value":48},"import",{"type":20,"tag":38,"props":50,"children":52},{"style":51},"--shiki-default:#268BD2;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[53],{"type":25,"value":54}," React",{"type":20,"tag":38,"props":56,"children":57},{"style":45},[58],{"type":25,"value":59}," from",{"type":20,"tag":38,"props":61,"children":63},{"style":62},"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[64],{"type":25,"value":65}," \"react\"",{"type":20,"tag":38,"props":67,"children":69},{"style":68},"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[70],{"type":25,"value":71},";\n",{"type":20,"tag":38,"props":73,"children":75},{"class":40,"line":74},2,[76],{"type":20,"tag":38,"props":77,"children":79},{"emptyLinePlaceholder":78},true,[80],{"type":25,"value":81},"\n",{"type":20,"tag":38,"props":83,"children":85},{"class":40,"line":84},3,[86,92,98,103,108,113,118,123,127],{"type":20,"tag":38,"props":87,"children":89},{"style":88},"--shiki-default:#586E75;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-default-font-weight:bold;--shiki-dark-font-weight:inherit;--shiki-sepia-font-weight:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[90],{"type":25,"value":91},"type",{"type":20,"tag":38,"props":93,"children":95},{"style":94},"--shiki-default:#CB4B16;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E;--shiki-default-text-decoration:inherit;--shiki-dark-text-decoration:inherit;--shiki-sepia-text-decoration:underline",[96],{"type":25,"value":97}," FixedForwardRef",{"type":20,"tag":38,"props":99,"children":100},{"style":45},[101],{"type":25,"value":102}," =",{"type":20,"tag":38,"props":104,"children":105},{"style":68},[106],{"type":25,"value":107}," \u003C",{"type":20,"tag":38,"props":109,"children":110},{"style":94},[111],{"type":25,"value":112},"T",{"type":20,"tag":38,"props":114,"children":115},{"style":68},[116],{"type":25,"value":117},", ",{"type":20,"tag":38,"props":119,"children":120},{"style":94},[121],{"type":25,"value":122},"P",{"type":20,"tag":38,"props":124,"children":125},{"style":45},[126],{"type":25,"value":102},{"type":20,"tag":38,"props":128,"children":129},{"style":68},[130],{"type":25,"value":131}," {}>(\n",{"type":20,"tag":38,"props":133,"children":135},{"class":40,"line":134},4,[136,142,147,152,158,162,167,171,176,180,184,189,194,199,203,208,213,217,221,226,231],{"type":20,"tag":38,"props":137,"children":139},{"style":138},"--shiki-default:#268BD2;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[140],{"type":25,"value":141},"  render",{"type":20,"tag":38,"props":143,"children":144},{"style":45},[145],{"type":25,"value":146},":",{"type":20,"tag":38,"props":148,"children":149},{"style":68},[150],{"type":25,"value":151}," (",{"type":20,"tag":38,"props":153,"children":155},{"style":154},"--shiki-default:#657B83;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[156],{"type":25,"value":157},"props",{"type":20,"tag":38,"props":159,"children":160},{"style":45},[161],{"type":25,"value":146},{"type":20,"tag":38,"props":163,"children":164},{"style":94},[165],{"type":25,"value":166}," P",{"type":20,"tag":38,"props":168,"children":169},{"style":68},[170],{"type":25,"value":117},{"type":20,"tag":38,"props":172,"children":173},{"style":154},[174],{"type":25,"value":175},"ref",{"type":20,"tag":38,"props":177,"children":178},{"style":45},[179],{"type":25,"value":146},{"type":20,"tag":38,"props":181,"children":182},{"style":94},[183],{"type":25,"value":54},{"type":20,"tag":38,"props":185,"children":186},{"style":68},[187],{"type":25,"value":188},".",{"type":20,"tag":38,"props":190,"children":191},{"style":94},[192],{"type":25,"value":193},"Ref",{"type":20,"tag":38,"props":195,"children":196},{"style":68},[197],{"type":25,"value":198},"\u003C",{"type":20,"tag":38,"props":200,"children":201},{"style":94},[202],{"type":25,"value":112},{"type":20,"tag":38,"props":204,"children":205},{"style":68},[206],{"type":25,"value":207},">) ",{"type":20,"tag":38,"props":209,"children":210},{"style":88},[211],{"type":25,"value":212},"=>",{"type":20,"tag":38,"props":214,"children":215},{"style":94},[216],{"type":25,"value":54},{"type":20,"tag":38,"props":218,"children":219},{"style":68},[220],{"type":25,"value":188},{"type":20,"tag":38,"props":222,"children":223},{"style":94},[224],{"type":25,"value":225},"ReactElement",{"type":20,"tag":38,"props":227,"children":228},{"style":45},[229],{"type":25,"value":230}," |",{"type":20,"tag":38,"props":232,"children":234},{"style":233},"--shiki-default:#859900;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[235],{"type":25,"value":236}," null\n",{"type":20,"tag":38,"props":238,"children":240},{"class":40,"line":239},5,[241,246,250,254,258,262,266,271,275,279,284,288,292,296,300,304,308,312,316,321],{"type":20,"tag":38,"props":242,"children":243},{"style":68},[244],{"type":25,"value":245},") ",{"type":20,"tag":38,"props":247,"children":248},{"style":88},[249],{"type":25,"value":212},{"type":20,"tag":38,"props":251,"children":252},{"style":68},[253],{"type":25,"value":151},{"type":20,"tag":38,"props":255,"children":256},{"style":154},[257],{"type":25,"value":157},{"type":20,"tag":38,"props":259,"children":260},{"style":45},[261],{"type":25,"value":146},{"type":20,"tag":38,"props":263,"children":264},{"style":94},[265],{"type":25,"value":166},{"type":20,"tag":38,"props":267,"children":268},{"style":45},[269],{"type":25,"value":270}," &",{"type":20,"tag":38,"props":272,"children":273},{"style":94},[274],{"type":25,"value":54},{"type":20,"tag":38,"props":276,"children":277},{"style":68},[278],{"type":25,"value":188},{"type":20,"tag":38,"props":280,"children":281},{"style":94},[282],{"type":25,"value":283},"RefAttributes",{"type":20,"tag":38,"props":285,"children":286},{"style":68},[287],{"type":25,"value":198},{"type":20,"tag":38,"props":289,"children":290},{"style":94},[291],{"type":25,"value":112},{"type":20,"tag":38,"props":293,"children":294},{"style":68},[295],{"type":25,"value":207},{"type":20,"tag":38,"props":297,"children":298},{"style":88},[299],{"type":25,"value":212},{"type":20,"tag":38,"props":301,"children":302},{"style":94},[303],{"type":25,"value":54},{"type":20,"tag":38,"props":305,"children":306},{"style":68},[307],{"type":25,"value":188},{"type":20,"tag":38,"props":309,"children":310},{"style":94},[311],{"type":25,"value":225},{"type":20,"tag":38,"props":313,"children":314},{"style":45},[315],{"type":25,"value":230},{"type":20,"tag":38,"props":317,"children":318},{"style":233},[319],{"type":25,"value":320}," null",{"type":20,"tag":38,"props":322,"children":323},{"style":68},[324],{"type":25,"value":71},{"type":20,"tag":38,"props":326,"children":328},{"class":40,"line":327},6,[329],{"type":20,"tag":38,"props":330,"children":331},{"emptyLinePlaceholder":78},[332],{"type":25,"value":81},{"type":20,"tag":38,"props":334,"children":336},{"class":40,"line":335},7,[337,342,348,352,356,360,365,370,374],{"type":20,"tag":38,"props":338,"children":339},{"style":88},[340],{"type":25,"value":341},"const",{"type":20,"tag":38,"props":343,"children":345},{"style":344},"--shiki-default:#268BD2;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[346],{"type":25,"value":347}," forwardRef",{"type":20,"tag":38,"props":349,"children":350},{"style":45},[351],{"type":25,"value":102},{"type":20,"tag":38,"props":353,"children":354},{"style":51},[355],{"type":25,"value":54},{"type":20,"tag":38,"props":357,"children":358},{"style":68},[359],{"type":25,"value":188},{"type":20,"tag":38,"props":361,"children":362},{"style":51},[363],{"type":25,"value":364},"forwardRef",{"type":20,"tag":38,"props":366,"children":367},{"style":45},[368],{"type":25,"value":369}," as",{"type":20,"tag":38,"props":371,"children":372},{"style":94},[373],{"type":25,"value":97},{"type":20,"tag":38,"props":375,"children":376},{"style":68},[377],{"type":25,"value":71},{"type":20,"tag":379,"props":380,"children":381},"style",{},[382],{"type":25,"value":383},"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":8,"searchDepth":74,"depth":74,"links":385},[],"markdown","content:zh:blog:forwardRef generics.md","content","zh/blog/forwardRef generics.md","md",1706852440866]