[{"data":1,"prerenderedAt":551},["Reactive",2],{"content-query-LEQlidCe6s":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"tags":11,"body":14,"_type":546,"_id":547,"_source":548,"_file":549,"_extension":550},"/zh/blog/conventional-changelog-for-lerna-5-and-6","blog",false,"","Lerna 5/6 配置对话式更新日志（Conventional Changelog）","配置lerna，并增加对话式更新日志（Conventional Changelog）。","2023-03-02 01:09",[12,13],"lerna","tool",{"type":15,"children":16,"toc":543},"root",[17,45,51,56,368,373,486,499,537],{"type":18,"tag":19,"props":20,"children":21},"element","p",{},[22,25,34,36,43],{"type":23,"value":24},"text","之前，我使用",{"type":18,"tag":26,"props":27,"children":31},"a",{"href":28,"rel":29},"https://github.com/atlassian/cz-lerna-changelog",[30],"nofollow",[32],{"type":23,"value":33},"cz-lerna-changelog",{"type":23,"value":35},"。问题是这个库很久不更新了，而且仅适用于 lerna 3 及更早版本。所以我创建了",{"type":18,"tag":26,"props":37,"children":40},{"href":38,"rel":39},"https://github.com/phphe/cz-conventional-changelog-lerna",[30],[41],{"type":23,"value":42},"cz-conventional-changelog-lerna",{"type":23,"value":44},"。它适用于 lerna 5 及以后的版本。",{"type":18,"tag":46,"props":47,"children":49},"h2",{"id":48},"使用示例",[50],{"type":23,"value":48},{"type":18,"tag":19,"props":52,"children":53},{},[54],{"type":23,"value":55},"项目根目录下的 package.json",{"type":18,"tag":57,"props":58,"children":62},"pre",{"className":59,"code":60,"language":61,"meta":7,"style":7},"language-json shiki shiki-themes solarized-light github-dark monokai","{\n  \"name\": \"root\",\n  \"private\": true,\n  \"workspaces\": [\"packages/*\"],\n  \"devDependencies\": {\n    \"commitizen\": \"^4.1.2\",\n    \"cz-conventional-changelog-lerna\": \"^0.1.0\",\n    \"lerna\": \"^5.0.0\"\n  },\n  \"scripts\": {\n    \"commit\": \"cz\",\n    \"commit-all\": \"git add . && cz\"\n  },\n  \"config\": {\n    \"commitizen\": {\n      \"path\": \"./node_modules/cz-conventional-changelog-lerna\"\n    }\n  }\n}\n","json",[63],{"type":18,"tag":64,"props":65,"children":66},"code",{"__ignoreMap":7},[67,79,105,128,152,166,188,210,228,237,250,272,290,298,311,323,341,350,359],{"type":18,"tag":68,"props":69,"children":72},"span",{"class":70,"line":71},"line",1,[73],{"type":18,"tag":68,"props":74,"children":76},{"style":75},"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[77],{"type":23,"value":78},"{\n",{"type":18,"tag":68,"props":80,"children":82},{"class":70,"line":81},2,[83,89,94,100],{"type":18,"tag":68,"props":84,"children":86},{"style":85},"--shiki-default:#859900;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[87],{"type":23,"value":88},"  \"name\"",{"type":18,"tag":68,"props":90,"children":91},{"style":75},[92],{"type":23,"value":93},": ",{"type":18,"tag":68,"props":95,"children":97},{"style":96},"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#CFCFC2",[98],{"type":23,"value":99},"\"root\"",{"type":18,"tag":68,"props":101,"children":102},{"style":75},[103],{"type":23,"value":104},",\n",{"type":18,"tag":68,"props":106,"children":108},{"class":70,"line":107},3,[109,114,118,124],{"type":18,"tag":68,"props":110,"children":111},{"style":85},[112],{"type":23,"value":113},"  \"private\"",{"type":18,"tag":68,"props":115,"children":116},{"style":75},[117],{"type":23,"value":93},{"type":18,"tag":68,"props":119,"children":121},{"style":120},"--shiki-default:#B58900;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[122],{"type":23,"value":123},"true",{"type":18,"tag":68,"props":125,"children":126},{"style":75},[127],{"type":23,"value":104},{"type":18,"tag":68,"props":129,"children":131},{"class":70,"line":130},4,[132,137,142,147],{"type":18,"tag":68,"props":133,"children":134},{"style":85},[135],{"type":23,"value":136},"  \"workspaces\"",{"type":18,"tag":68,"props":138,"children":139},{"style":75},[140],{"type":23,"value":141},": [",{"type":18,"tag":68,"props":143,"children":144},{"style":96},[145],{"type":23,"value":146},"\"packages/*\"",{"type":18,"tag":68,"props":148,"children":149},{"style":75},[150],{"type":23,"value":151},"],\n",{"type":18,"tag":68,"props":153,"children":155},{"class":70,"line":154},5,[156,161],{"type":18,"tag":68,"props":157,"children":158},{"style":85},[159],{"type":23,"value":160},"  \"devDependencies\"",{"type":18,"tag":68,"props":162,"children":163},{"style":75},[164],{"type":23,"value":165},": {\n",{"type":18,"tag":68,"props":167,"children":169},{"class":70,"line":168},6,[170,175,179,184],{"type":18,"tag":68,"props":171,"children":172},{"style":85},[173],{"type":23,"value":174},"    \"commitizen\"",{"type":18,"tag":68,"props":176,"children":177},{"style":75},[178],{"type":23,"value":93},{"type":18,"tag":68,"props":180,"children":181},{"style":96},[182],{"type":23,"value":183},"\"^4.1.2\"",{"type":18,"tag":68,"props":185,"children":186},{"style":75},[187],{"type":23,"value":104},{"type":18,"tag":68,"props":189,"children":191},{"class":70,"line":190},7,[192,197,201,206],{"type":18,"tag":68,"props":193,"children":194},{"style":85},[195],{"type":23,"value":196},"    \"cz-conventional-changelog-lerna\"",{"type":18,"tag":68,"props":198,"children":199},{"style":75},[200],{"type":23,"value":93},{"type":18,"tag":68,"props":202,"children":203},{"style":96},[204],{"type":23,"value":205},"\"^0.1.0\"",{"type":18,"tag":68,"props":207,"children":208},{"style":75},[209],{"type":23,"value":104},{"type":18,"tag":68,"props":211,"children":213},{"class":70,"line":212},8,[214,219,223],{"type":18,"tag":68,"props":215,"children":216},{"style":85},[217],{"type":23,"value":218},"    \"lerna\"",{"type":18,"tag":68,"props":220,"children":221},{"style":75},[222],{"type":23,"value":93},{"type":18,"tag":68,"props":224,"children":225},{"style":96},[226],{"type":23,"value":227},"\"^5.0.0\"\n",{"type":18,"tag":68,"props":229,"children":231},{"class":70,"line":230},9,[232],{"type":18,"tag":68,"props":233,"children":234},{"style":75},[235],{"type":23,"value":236},"  },\n",{"type":18,"tag":68,"props":238,"children":240},{"class":70,"line":239},10,[241,246],{"type":18,"tag":68,"props":242,"children":243},{"style":85},[244],{"type":23,"value":245},"  \"scripts\"",{"type":18,"tag":68,"props":247,"children":248},{"style":75},[249],{"type":23,"value":165},{"type":18,"tag":68,"props":251,"children":253},{"class":70,"line":252},11,[254,259,263,268],{"type":18,"tag":68,"props":255,"children":256},{"style":85},[257],{"type":23,"value":258},"    \"commit\"",{"type":18,"tag":68,"props":260,"children":261},{"style":75},[262],{"type":23,"value":93},{"type":18,"tag":68,"props":264,"children":265},{"style":96},[266],{"type":23,"value":267},"\"cz\"",{"type":18,"tag":68,"props":269,"children":270},{"style":75},[271],{"type":23,"value":104},{"type":18,"tag":68,"props":273,"children":275},{"class":70,"line":274},12,[276,281,285],{"type":18,"tag":68,"props":277,"children":278},{"style":85},[279],{"type":23,"value":280},"    \"commit-all\"",{"type":18,"tag":68,"props":282,"children":283},{"style":75},[284],{"type":23,"value":93},{"type":18,"tag":68,"props":286,"children":287},{"style":96},[288],{"type":23,"value":289},"\"git add . && cz\"\n",{"type":18,"tag":68,"props":291,"children":293},{"class":70,"line":292},13,[294],{"type":18,"tag":68,"props":295,"children":296},{"style":75},[297],{"type":23,"value":236},{"type":18,"tag":68,"props":299,"children":301},{"class":70,"line":300},14,[302,307],{"type":18,"tag":68,"props":303,"children":304},{"style":85},[305],{"type":23,"value":306},"  \"config\"",{"type":18,"tag":68,"props":308,"children":309},{"style":75},[310],{"type":23,"value":165},{"type":18,"tag":68,"props":312,"children":314},{"class":70,"line":313},15,[315,319],{"type":18,"tag":68,"props":316,"children":317},{"style":85},[318],{"type":23,"value":174},{"type":18,"tag":68,"props":320,"children":321},{"style":75},[322],{"type":23,"value":165},{"type":18,"tag":68,"props":324,"children":326},{"class":70,"line":325},16,[327,332,336],{"type":18,"tag":68,"props":328,"children":329},{"style":85},[330],{"type":23,"value":331},"      \"path\"",{"type":18,"tag":68,"props":333,"children":334},{"style":75},[335],{"type":23,"value":93},{"type":18,"tag":68,"props":337,"children":338},{"style":96},[339],{"type":23,"value":340},"\"./node_modules/cz-conventional-changelog-lerna\"\n",{"type":18,"tag":68,"props":342,"children":344},{"class":70,"line":343},17,[345],{"type":18,"tag":68,"props":346,"children":347},{"style":75},[348],{"type":23,"value":349},"    }\n",{"type":18,"tag":68,"props":351,"children":353},{"class":70,"line":352},18,[354],{"type":18,"tag":68,"props":355,"children":356},{"style":75},[357],{"type":23,"value":358},"  }\n",{"type":18,"tag":68,"props":360,"children":362},{"class":70,"line":361},19,[363],{"type":18,"tag":68,"props":364,"children":365},{"style":75},[366],{"type":23,"value":367},"}\n",{"type":18,"tag":19,"props":369,"children":370},{},[371],{"type":23,"value":372},"lerna.json",{"type":18,"tag":57,"props":374,"children":376},{"className":59,"code":375,"language":61,"meta":7,"style":7},"{\n  \"packages\": [\"packages/*\"],\n  \"command\": {\n    \"version\": {\n      \"conventionalCommits\": true\n    }\n  },\n  \"version\": \"independent\"\n}\n",[377],{"type":18,"tag":64,"props":378,"children":379},{"__ignoreMap":7},[380,387,407,419,431,448,455,462,479],{"type":18,"tag":68,"props":381,"children":382},{"class":70,"line":71},[383],{"type":18,"tag":68,"props":384,"children":385},{"style":75},[386],{"type":23,"value":78},{"type":18,"tag":68,"props":388,"children":389},{"class":70,"line":81},[390,395,399,403],{"type":18,"tag":68,"props":391,"children":392},{"style":85},[393],{"type":23,"value":394},"  \"packages\"",{"type":18,"tag":68,"props":396,"children":397},{"style":75},[398],{"type":23,"value":141},{"type":18,"tag":68,"props":400,"children":401},{"style":96},[402],{"type":23,"value":146},{"type":18,"tag":68,"props":404,"children":405},{"style":75},[406],{"type":23,"value":151},{"type":18,"tag":68,"props":408,"children":409},{"class":70,"line":107},[410,415],{"type":18,"tag":68,"props":411,"children":412},{"style":85},[413],{"type":23,"value":414},"  \"command\"",{"type":18,"tag":68,"props":416,"children":417},{"style":75},[418],{"type":23,"value":165},{"type":18,"tag":68,"props":420,"children":421},{"class":70,"line":130},[422,427],{"type":18,"tag":68,"props":423,"children":424},{"style":85},[425],{"type":23,"value":426},"    \"version\"",{"type":18,"tag":68,"props":428,"children":429},{"style":75},[430],{"type":23,"value":165},{"type":18,"tag":68,"props":432,"children":433},{"class":70,"line":154},[434,439,443],{"type":18,"tag":68,"props":435,"children":436},{"style":85},[437],{"type":23,"value":438},"      \"conventionalCommits\"",{"type":18,"tag":68,"props":440,"children":441},{"style":75},[442],{"type":23,"value":93},{"type":18,"tag":68,"props":444,"children":445},{"style":120},[446],{"type":23,"value":447},"true\n",{"type":18,"tag":68,"props":449,"children":450},{"class":70,"line":168},[451],{"type":18,"tag":68,"props":452,"children":453},{"style":75},[454],{"type":23,"value":349},{"type":18,"tag":68,"props":456,"children":457},{"class":70,"line":190},[458],{"type":18,"tag":68,"props":459,"children":460},{"style":75},[461],{"type":23,"value":236},{"type":18,"tag":68,"props":463,"children":464},{"class":70,"line":212},[465,470,474],{"type":18,"tag":68,"props":466,"children":467},{"style":85},[468],{"type":23,"value":469},"  \"version\"",{"type":18,"tag":68,"props":471,"children":472},{"style":75},[473],{"type":23,"value":93},{"type":18,"tag":68,"props":475,"children":476},{"style":96},[477],{"type":23,"value":478},"\"independent\"\n",{"type":18,"tag":68,"props":480,"children":481},{"class":70,"line":230},[482],{"type":18,"tag":68,"props":483,"children":484},{"style":75},[485],{"type":23,"value":367},{"type":18,"tag":19,"props":487,"children":488},{},[489,491,497],{"type":23,"value":490},"提交 git commit 时，首先添加更改到缓冲区（git add），然后执行",{"type":18,"tag":64,"props":492,"children":494},{"className":493},[],[495],{"type":23,"value":496},"npm run commit",{"type":23,"value":498},"，根据提示填写信息并完成提交。",{"type":18,"tag":19,"props":500,"children":501},{},[502,504,510,512,518,520,526,528,535],{"type":23,"value":503},"执行",{"type":18,"tag":64,"props":505,"children":507},{"className":506},[],[508],{"type":23,"value":509},"lerna version",{"type":23,"value":511},"或",{"type":18,"tag":64,"props":513,"children":515},{"className":514},[],[516],{"type":23,"value":517},"lerna publish",{"type":23,"value":519},"时会在 package 目录自动生成",{"type":18,"tag":64,"props":521,"children":523},{"className":522},[],[524],{"type":23,"value":525},"CHANGELOG.md",{"type":23,"value":527},". 可以参考我的项目: ",{"type":18,"tag":26,"props":529,"children":532},{"href":530,"rel":531},"https://github.com/phphe/he-tree",[30],[533],{"type":23,"value":534},"he-tree: Vue 可拖拽树组件",{"type":23,"value":536},".",{"type":18,"tag":538,"props":539,"children":540},"style",{},[541],{"type":23,"value":542},"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":7,"searchDepth":81,"depth":81,"links":544},[545],{"id":48,"depth":81,"text":48},"markdown","content:zh:blog:Conventional Changelog for Lerna 5 and 6.md","content","zh/blog/Conventional Changelog for Lerna 5 and 6.md","md",1706852440124]