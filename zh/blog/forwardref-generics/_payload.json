[{"data":1,"prerenderedAt":390},["Reactive",2],{"content-query-OwfYc5VEKk":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"tags":11,"body":15,"_type":385,"_id":386,"_source":387,"_file":388,"_extension":389},"/zh/blog/forwardref-generics","blog",false,"","React使用fowardRef导致丢失组件泛型","React 中使用 fowardRef 包裹组件后，会丢失组件的泛型。这是个 bug。解决办法，使用修复的 fowardRef 函数类型覆盖原来的。","2024-02-02 13:30",[12,13,14],"react","typescript","bug",{"type":16,"children":17,"toc":383},"root",[18,25,377],{"type":19,"tag":20,"props":21,"children":22},"element","p",{},[23],{"type":24,"value":9},"text",{"type":19,"tag":26,"props":27,"children":31},"pre",{"className":28,"code":29,"language":30,"meta":7,"style":7},"language-ts shiki shiki-themes solarized-light github-dark monokai","import React from \"react\";\n\ntype FixedForwardRef = \u003CT, P = {}>(\n  render: (props: P, ref: React.Ref\u003CT>) => React.ReactElement | null\n) => (props: P & React.RefAttributes\u003CT>) => React.ReactElement | null;\n\nconst forwardRef = React.forwardRef as FixedForwardRef;\n","ts",[32],{"type":19,"tag":33,"props":34,"children":35},"code",{"__ignoreMap":7},[36,71,81,131,236,324,332],{"type":19,"tag":37,"props":38,"children":41},"span",{"class":39,"line":40},"line",1,[42,48,54,59,65],{"type":19,"tag":37,"props":43,"children":45},{"style":44},"--shiki-default:#859900;--shiki-dark:#F97583;--shiki-sepia:#F92672",[46],{"type":24,"value":47},"import",{"type":19,"tag":37,"props":49,"children":51},{"style":50},"--shiki-default:#268BD2;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[52],{"type":24,"value":53}," React",{"type":19,"tag":37,"props":55,"children":56},{"style":44},[57],{"type":24,"value":58}," from",{"type":19,"tag":37,"props":60,"children":62},{"style":61},"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[63],{"type":24,"value":64}," \"react\"",{"type":19,"tag":37,"props":66,"children":68},{"style":67},"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[69],{"type":24,"value":70},";\n",{"type":19,"tag":37,"props":72,"children":74},{"class":39,"line":73},2,[75],{"type":19,"tag":37,"props":76,"children":78},{"emptyLinePlaceholder":77},true,[79],{"type":24,"value":80},"\n",{"type":19,"tag":37,"props":82,"children":84},{"class":39,"line":83},3,[85,91,97,102,107,112,117,122,126],{"type":19,"tag":37,"props":86,"children":88},{"style":87},"--shiki-default:#586E75;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-default-font-weight:bold;--shiki-dark-font-weight:inherit;--shiki-sepia-font-weight:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[89],{"type":24,"value":90},"type",{"type":19,"tag":37,"props":92,"children":94},{"style":93},"--shiki-default:#CB4B16;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E;--shiki-default-text-decoration:inherit;--shiki-dark-text-decoration:inherit;--shiki-sepia-text-decoration:underline",[95],{"type":24,"value":96}," FixedForwardRef",{"type":19,"tag":37,"props":98,"children":99},{"style":44},[100],{"type":24,"value":101}," =",{"type":19,"tag":37,"props":103,"children":104},{"style":67},[105],{"type":24,"value":106}," \u003C",{"type":19,"tag":37,"props":108,"children":109},{"style":93},[110],{"type":24,"value":111},"T",{"type":19,"tag":37,"props":113,"children":114},{"style":67},[115],{"type":24,"value":116},", ",{"type":19,"tag":37,"props":118,"children":119},{"style":93},[120],{"type":24,"value":121},"P",{"type":19,"tag":37,"props":123,"children":124},{"style":44},[125],{"type":24,"value":101},{"type":19,"tag":37,"props":127,"children":128},{"style":67},[129],{"type":24,"value":130}," {}>(\n",{"type":19,"tag":37,"props":132,"children":134},{"class":39,"line":133},4,[135,141,146,151,157,161,166,170,175,179,183,188,193,198,202,207,212,216,220,225,230],{"type":19,"tag":37,"props":136,"children":138},{"style":137},"--shiki-default:#268BD2;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[139],{"type":24,"value":140},"  render",{"type":19,"tag":37,"props":142,"children":143},{"style":44},[144],{"type":24,"value":145},":",{"type":19,"tag":37,"props":147,"children":148},{"style":67},[149],{"type":24,"value":150}," (",{"type":19,"tag":37,"props":152,"children":154},{"style":153},"--shiki-default:#657B83;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[155],{"type":24,"value":156},"props",{"type":19,"tag":37,"props":158,"children":159},{"style":44},[160],{"type":24,"value":145},{"type":19,"tag":37,"props":162,"children":163},{"style":93},[164],{"type":24,"value":165}," P",{"type":19,"tag":37,"props":167,"children":168},{"style":67},[169],{"type":24,"value":116},{"type":19,"tag":37,"props":171,"children":172},{"style":153},[173],{"type":24,"value":174},"ref",{"type":19,"tag":37,"props":176,"children":177},{"style":44},[178],{"type":24,"value":145},{"type":19,"tag":37,"props":180,"children":181},{"style":93},[182],{"type":24,"value":53},{"type":19,"tag":37,"props":184,"children":185},{"style":67},[186],{"type":24,"value":187},".",{"type":19,"tag":37,"props":189,"children":190},{"style":93},[191],{"type":24,"value":192},"Ref",{"type":19,"tag":37,"props":194,"children":195},{"style":67},[196],{"type":24,"value":197},"\u003C",{"type":19,"tag":37,"props":199,"children":200},{"style":93},[201],{"type":24,"value":111},{"type":19,"tag":37,"props":203,"children":204},{"style":67},[205],{"type":24,"value":206},">) ",{"type":19,"tag":37,"props":208,"children":209},{"style":87},[210],{"type":24,"value":211},"=>",{"type":19,"tag":37,"props":213,"children":214},{"style":93},[215],{"type":24,"value":53},{"type":19,"tag":37,"props":217,"children":218},{"style":67},[219],{"type":24,"value":187},{"type":19,"tag":37,"props":221,"children":222},{"style":93},[223],{"type":24,"value":224},"ReactElement",{"type":19,"tag":37,"props":226,"children":227},{"style":44},[228],{"type":24,"value":229}," |",{"type":19,"tag":37,"props":231,"children":233},{"style":232},"--shiki-default:#859900;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[234],{"type":24,"value":235}," null\n",{"type":19,"tag":37,"props":237,"children":239},{"class":39,"line":238},5,[240,245,249,253,257,261,265,270,274,278,283,287,291,295,299,303,307,311,315,320],{"type":19,"tag":37,"props":241,"children":242},{"style":67},[243],{"type":24,"value":244},") ",{"type":19,"tag":37,"props":246,"children":247},{"style":87},[248],{"type":24,"value":211},{"type":19,"tag":37,"props":250,"children":251},{"style":67},[252],{"type":24,"value":150},{"type":19,"tag":37,"props":254,"children":255},{"style":153},[256],{"type":24,"value":156},{"type":19,"tag":37,"props":258,"children":259},{"style":44},[260],{"type":24,"value":145},{"type":19,"tag":37,"props":262,"children":263},{"style":93},[264],{"type":24,"value":165},{"type":19,"tag":37,"props":266,"children":267},{"style":44},[268],{"type":24,"value":269}," &",{"type":19,"tag":37,"props":271,"children":272},{"style":93},[273],{"type":24,"value":53},{"type":19,"tag":37,"props":275,"children":276},{"style":67},[277],{"type":24,"value":187},{"type":19,"tag":37,"props":279,"children":280},{"style":93},[281],{"type":24,"value":282},"RefAttributes",{"type":19,"tag":37,"props":284,"children":285},{"style":67},[286],{"type":24,"value":197},{"type":19,"tag":37,"props":288,"children":289},{"style":93},[290],{"type":24,"value":111},{"type":19,"tag":37,"props":292,"children":293},{"style":67},[294],{"type":24,"value":206},{"type":19,"tag":37,"props":296,"children":297},{"style":87},[298],{"type":24,"value":211},{"type":19,"tag":37,"props":300,"children":301},{"style":93},[302],{"type":24,"value":53},{"type":19,"tag":37,"props":304,"children":305},{"style":67},[306],{"type":24,"value":187},{"type":19,"tag":37,"props":308,"children":309},{"style":93},[310],{"type":24,"value":224},{"type":19,"tag":37,"props":312,"children":313},{"style":44},[314],{"type":24,"value":229},{"type":19,"tag":37,"props":316,"children":317},{"style":232},[318],{"type":24,"value":319}," null",{"type":19,"tag":37,"props":321,"children":322},{"style":67},[323],{"type":24,"value":70},{"type":19,"tag":37,"props":325,"children":327},{"class":39,"line":326},6,[328],{"type":19,"tag":37,"props":329,"children":330},{"emptyLinePlaceholder":77},[331],{"type":24,"value":80},{"type":19,"tag":37,"props":333,"children":335},{"class":39,"line":334},7,[336,341,347,351,355,359,364,369,373],{"type":19,"tag":37,"props":337,"children":338},{"style":87},[339],{"type":24,"value":340},"const",{"type":19,"tag":37,"props":342,"children":344},{"style":343},"--shiki-default:#268BD2;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[345],{"type":24,"value":346}," forwardRef",{"type":19,"tag":37,"props":348,"children":349},{"style":44},[350],{"type":24,"value":101},{"type":19,"tag":37,"props":352,"children":353},{"style":50},[354],{"type":24,"value":53},{"type":19,"tag":37,"props":356,"children":357},{"style":67},[358],{"type":24,"value":187},{"type":19,"tag":37,"props":360,"children":361},{"style":50},[362],{"type":24,"value":363},"forwardRef",{"type":19,"tag":37,"props":365,"children":366},{"style":44},[367],{"type":24,"value":368}," as",{"type":19,"tag":37,"props":370,"children":371},{"style":93},[372],{"type":24,"value":96},{"type":19,"tag":37,"props":374,"children":375},{"style":67},[376],{"type":24,"value":70},{"type":19,"tag":378,"props":379,"children":380},"style",{},[381],{"type":24,"value":382},"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":7,"searchDepth":73,"depth":73,"links":384},[],"markdown","content:zh:blog:forwardRef generics.md","content","zh/blog/forwardRef generics.md","md",1706852440117]