[{"data":1,"prerenderedAt":374},["Reactive",2],{"content-query-caymj3RZq8":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"tags":11,"excerpt":14,"body":34,"_type":369,"_id":370,"_source":371,"_file":372,"_extension":373},"/blog/nuxt3-i18n-setup","blog",false,"","Configuring Nuxt3 and @nuxtjs/i18n v8 Multilingual Module, and Common Pitfalls","These days, I have been itching to refactor my blog using Nuxt3.7 and configure multi-language functionality using @nuxtjs/i18n v8. During the configuration process, I encountered some challenges, so I decided to write down some notes.","2023-09-26 22:35",[12,13],"nuxt","tool",{"type":15,"children":16},"root",[17],{"type":18,"tag":19,"props":20,"children":21},"element","p",{},[22,25,32],{"type":23,"value":24},"text","These days, I have been itching to refactor my blog using Nuxt3.7 and configure multi-language functionality using ",{"type":18,"tag":26,"props":27,"children":29},"code",{"className":28},[],[30],{"type":23,"value":31},"@nuxtjs/i18n",{"type":23,"value":33}," v8. During the configuration process, I encountered some challenges, so I decided to write down some notes.",{"type":15,"children":35,"toc":364},[36,46,53,82,95,200,258,268,274,293,319,325,358],{"type":18,"tag":19,"props":37,"children":38},{},[39,40,45],{"type":23,"value":24},{"type":18,"tag":26,"props":41,"children":43},{"className":42},[],[44],{"type":23,"value":31},{"type":23,"value":33},{"type":18,"tag":47,"props":48,"children":50},"h2",{"id":49},"routing",[51],{"type":23,"value":52},"Routing",{"type":18,"tag":19,"props":54,"children":55},{},[56,58,64,66,72,74,80],{"type":23,"value":57},"I wanted to add language-prefixed routes for the existing routes. For example, after adding the language ",{"type":18,"tag":26,"props":59,"children":61},{"className":60},[],[62],{"type":23,"value":63},"en",{"type":23,"value":65},", the home page should automatically register the route ",{"type":18,"tag":26,"props":67,"children":69},{"className":68},[],[70],{"type":23,"value":71},"/en",{"type":23,"value":73},". After configuring according to the official documentation, everything else was working fine except for the routes. By the way, Nuxt comes with a built-in in-browser development tool that allows you to view the registered routes. You can click on the floating Nuxt icon on the page or press the ",{"type":18,"tag":26,"props":75,"children":77},{"className":76},[],[78],{"type":23,"value":79},"Shift+Alt+D",{"type":23,"value":81}," key combination to open it.",{"type":18,"tag":19,"props":83,"children":84},{},[85,87,93],{"type":23,"value":86},"After a few hours of tinkering, I finally succeeded. As for why I had to do it this way, I have no idea. Here's how I wrote it in ",{"type":18,"tag":26,"props":88,"children":90},{"className":89},[],[91],{"type":23,"value":92},"nuxt.config.ts/js",{"type":23,"value":94},":",{"type":18,"tag":96,"props":97,"children":101},"pre",{"className":98,"code":99,"language":100,"meta":7,"style":7},"language-ts shiki shiki-themes solarized-light github-dark monokai","i18n: {\n  locales: [\"en\", \"zh\"], // used in URL path prefix\n  defaultLocale: \"en\", // default locale of your project for Nuxt pages and routings\n}\n","ts",[102],{"type":18,"tag":26,"props":103,"children":104},{"__ignoreMap":7},[105,123,164,191],{"type":18,"tag":106,"props":107,"children":110},"span",{"class":108,"line":109},"line",1,[111,117],{"type":18,"tag":106,"props":112,"children":114},{"style":113},"--shiki-default:#657B83;--shiki-dark:#B392F0;--shiki-sepia:#F8F8F2",[115],{"type":23,"value":116},"i18n",{"type":18,"tag":106,"props":118,"children":120},{"style":119},"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[121],{"type":23,"value":122},": {\n",{"type":18,"tag":106,"props":124,"children":126},{"class":108,"line":125},2,[127,132,137,143,148,153,158],{"type":18,"tag":106,"props":128,"children":129},{"style":113},[130],{"type":23,"value":131},"  locales",{"type":18,"tag":106,"props":133,"children":134},{"style":119},[135],{"type":23,"value":136},": [",{"type":18,"tag":106,"props":138,"children":140},{"style":139},"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[141],{"type":23,"value":142},"\"en\"",{"type":18,"tag":106,"props":144,"children":145},{"style":119},[146],{"type":23,"value":147},", ",{"type":18,"tag":106,"props":149,"children":150},{"style":139},[151],{"type":23,"value":152},"\"zh\"",{"type":18,"tag":106,"props":154,"children":155},{"style":119},[156],{"type":23,"value":157},"], ",{"type":18,"tag":106,"props":159,"children":161},{"style":160},"--shiki-default:#93A1A1;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-default-font-style:italic;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[162],{"type":23,"value":163},"// used in URL path prefix\n",{"type":18,"tag":106,"props":165,"children":167},{"class":108,"line":166},3,[168,173,178,182,186],{"type":18,"tag":106,"props":169,"children":170},{"style":113},[171],{"type":23,"value":172},"  defaultLocale",{"type":18,"tag":106,"props":174,"children":175},{"style":119},[176],{"type":23,"value":177},": ",{"type":18,"tag":106,"props":179,"children":180},{"style":139},[181],{"type":23,"value":142},{"type":18,"tag":106,"props":183,"children":184},{"style":119},[185],{"type":23,"value":147},{"type":18,"tag":106,"props":187,"children":188},{"style":160},[189],{"type":23,"value":190},"// default locale of your project for Nuxt pages and routings\n",{"type":18,"tag":106,"props":192,"children":194},{"class":108,"line":193},4,[195],{"type":18,"tag":106,"props":196,"children":197},{"style":119},[198],{"type":23,"value":199},"}\n",{"type":18,"tag":19,"props":201,"children":202},{},[203,205,211,213,219,221,227,229,234,236,242,244,249,251,256],{"type":23,"value":204},"This means that ",{"type":18,"tag":26,"props":206,"children":208},{"className":207},[],[209],{"type":23,"value":210},"locales",{"type":23,"value":212}," and ",{"type":18,"tag":26,"props":214,"children":216},{"className":215},[],[217],{"type":23,"value":218},"defaultLocale",{"type":23,"value":220}," should be written in ",{"type":18,"tag":26,"props":222,"children":224},{"className":223},[],[225],{"type":23,"value":226},"nuxt.config",{"type":23,"value":228},", while the rest of the ",{"type":18,"tag":26,"props":230,"children":232},{"className":231},[],[233],{"type":23,"value":31},{"type":23,"value":235}," configuration is written in ",{"type":18,"tag":26,"props":237,"children":239},{"className":238},[],[240],{"type":23,"value":241},"i18n.config.ts",{"type":23,"value":243},". This configuration works fine. Previously, I had all the ",{"type":18,"tag":26,"props":245,"children":247},{"className":246},[],[248],{"type":23,"value":31},{"type":23,"value":250}," configuration written in ",{"type":18,"tag":26,"props":252,"children":254},{"className":253},[],[255],{"type":23,"value":241},{"type":23,"value":257},", which caused the issue of not adding routes for other languages.",{"type":18,"tag":19,"props":259,"children":260},{},[261,266],{"type":18,"tag":26,"props":262,"children":264},{"className":263},[],[265],{"type":23,"value":31},{"type":23,"value":267}," has several routing strategies, and I am using the default strategy here.",{"type":18,"tag":47,"props":269,"children":271},{"id":270},"nuxt-generate",[272],{"type":23,"value":273},"nuxt generate",{"type":18,"tag":19,"props":275,"children":276},{},[277,279,284,286,291],{"type":23,"value":278},"There was a bug in the ",{"type":18,"tag":26,"props":280,"children":282},{"className":281},[],[283],{"type":23,"value":31},{"type":23,"value":285}," version I used these days. When running ",{"type":18,"tag":26,"props":287,"children":289},{"className":288},[],[290],{"type":23,"value":273},{"type":23,"value":292},", an error occurred. Installing the latest version fixed the issue.",{"type":18,"tag":96,"props":294,"children":298},{"className":295,"code":296,"language":297,"meta":7,"style":7},"language-json shiki shiki-themes solarized-light github-dark monokai","\"@nuxtjs/i18n\": \"npm:@nuxtjs/i18n-edge\"\n\n","json",[299],{"type":18,"tag":26,"props":300,"children":301},{"__ignoreMap":7},[302],{"type":18,"tag":106,"props":303,"children":304},{"class":108,"line":109},[305,310,314],{"type":18,"tag":106,"props":306,"children":307},{"style":139},[308],{"type":23,"value":309},"\"@nuxtjs/i18n\"",{"type":18,"tag":106,"props":311,"children":312},{"style":119},[313],{"type":23,"value":177},{"type":18,"tag":106,"props":315,"children":316},{"style":139},[317],{"type":23,"value":318},"\"npm:@nuxtjs/i18n-edge\"\n",{"type":18,"tag":47,"props":320,"children":322},{"id":321},"link-component",[323],{"type":23,"value":324},"Link Component",{"type":18,"tag":19,"props":326,"children":327},{},[328,333,335,341,343,349,351,356],{"type":18,"tag":26,"props":329,"children":331},{"className":330},[],[332],{"type":23,"value":31},{"type":23,"value":334}," provides the ",{"type":18,"tag":26,"props":336,"children":338},{"className":337},[],[339],{"type":23,"value":340},"useLocalePath",{"type":23,"value":342}," function for translating links. However, it was cumbersome to import it every time it was used. So, I tried to write a component that could automatically translate links. But halfway through, I discovered that it already exists and is called ",{"type":18,"tag":26,"props":344,"children":346},{"className":345},[],[347],{"type":23,"value":348},"NuxtLinkLocale",{"type":23,"value":350},". I must say, this component is not mentioned on the page where the ",{"type":18,"tag":26,"props":352,"children":354},{"className":353},[],[355],{"type":23,"value":340},{"type":23,"value":357}," function is documented, nor is it included in the navigation menu on the left sidebar.",{"type":18,"tag":359,"props":360,"children":361},"style",{},[362],{"type":23,"value":363},"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":7,"searchDepth":125,"depth":125,"links":365},[366,367,368],{"id":49,"depth":125,"text":52},{"id":270,"depth":125,"text":273},{"id":321,"depth":125,"text":324},"markdown","content:blog:nuxt3 i18n setup.md","content","blog/nuxt3 i18n setup.md","md",1706852440165]