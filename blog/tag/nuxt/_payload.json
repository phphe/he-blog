[{"data":1,"prerenderedAt":375},["Reactive",2],{"content-query-dfLoV5SjS7":3},[4],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":9,"description":10,"date":11,"tags":12,"excerpt":15,"body":35,"_type":370,"_id":371,"_source":372,"_file":373,"_extension":374},"/blog/nuxt3-i18n-setup","blog",false,"","Configuring Nuxt3 and @nuxtjs/i18n v8 Multilingual Module, and Common Pitfalls","These days, I have been itching to refactor my blog using Nuxt3.7 and configure multi-language functionality using @nuxtjs/i18n v8. During the configuration process, I encountered some challenges, so I decided to write down some notes.","2023-09-26 22:35",[13,14],"nuxt","tool",{"type":16,"children":17},"root",[18],{"type":19,"tag":20,"props":21,"children":22},"element","p",{},[23,26,33],{"type":24,"value":25},"text","These days, I have been itching to refactor my blog using Nuxt3.7 and configure multi-language functionality using ",{"type":19,"tag":27,"props":28,"children":30},"code",{"className":29},[],[31],{"type":24,"value":32},"@nuxtjs/i18n",{"type":24,"value":34}," v8. During the configuration process, I encountered some challenges, so I decided to write down some notes.",{"type":16,"children":36,"toc":365},[37,47,54,83,96,201,259,269,275,294,320,326,359],{"type":19,"tag":20,"props":38,"children":39},{},[40,41,46],{"type":24,"value":25},{"type":19,"tag":27,"props":42,"children":44},{"className":43},[],[45],{"type":24,"value":32},{"type":24,"value":34},{"type":19,"tag":48,"props":49,"children":51},"h2",{"id":50},"routing",[52],{"type":24,"value":53},"Routing",{"type":19,"tag":20,"props":55,"children":56},{},[57,59,65,67,73,75,81],{"type":24,"value":58},"I wanted to add language-prefixed routes for the existing routes. For example, after adding the language ",{"type":19,"tag":27,"props":60,"children":62},{"className":61},[],[63],{"type":24,"value":64},"en",{"type":24,"value":66},", the home page should automatically register the route ",{"type":19,"tag":27,"props":68,"children":70},{"className":69},[],[71],{"type":24,"value":72},"/en",{"type":24,"value":74},". After configuring according to the official documentation, everything else was working fine except for the routes. By the way, Nuxt comes with a built-in in-browser development tool that allows you to view the registered routes. You can click on the floating Nuxt icon on the page or press the ",{"type":19,"tag":27,"props":76,"children":78},{"className":77},[],[79],{"type":24,"value":80},"Shift+Alt+D",{"type":24,"value":82}," key combination to open it.",{"type":19,"tag":20,"props":84,"children":85},{},[86,88,94],{"type":24,"value":87},"After a few hours of tinkering, I finally succeeded. As for why I had to do it this way, I have no idea. Here's how I wrote it in ",{"type":19,"tag":27,"props":89,"children":91},{"className":90},[],[92],{"type":24,"value":93},"nuxt.config.ts/js",{"type":24,"value":95},":",{"type":19,"tag":97,"props":98,"children":102},"pre",{"className":99,"code":100,"language":101,"meta":8,"style":8},"language-ts shiki shiki-themes solarized-light github-dark monokai","i18n: {\n  locales: [\"en\", \"zh\"], // used in URL path prefix\n  defaultLocale: \"en\", // default locale of your project for Nuxt pages and routings\n}\n","ts",[103],{"type":19,"tag":27,"props":104,"children":105},{"__ignoreMap":8},[106,124,165,192],{"type":19,"tag":107,"props":108,"children":111},"span",{"class":109,"line":110},"line",1,[112,118],{"type":19,"tag":107,"props":113,"children":115},{"style":114},"--shiki-default:#657B83;--shiki-dark:#B392F0;--shiki-sepia:#F8F8F2",[116],{"type":24,"value":117},"i18n",{"type":19,"tag":107,"props":119,"children":121},{"style":120},"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[122],{"type":24,"value":123},": {\n",{"type":19,"tag":107,"props":125,"children":127},{"class":109,"line":126},2,[128,133,138,144,149,154,159],{"type":19,"tag":107,"props":129,"children":130},{"style":114},[131],{"type":24,"value":132},"  locales",{"type":19,"tag":107,"props":134,"children":135},{"style":120},[136],{"type":24,"value":137},": [",{"type":19,"tag":107,"props":139,"children":141},{"style":140},"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[142],{"type":24,"value":143},"\"en\"",{"type":19,"tag":107,"props":145,"children":146},{"style":120},[147],{"type":24,"value":148},", ",{"type":19,"tag":107,"props":150,"children":151},{"style":140},[152],{"type":24,"value":153},"\"zh\"",{"type":19,"tag":107,"props":155,"children":156},{"style":120},[157],{"type":24,"value":158},"], ",{"type":19,"tag":107,"props":160,"children":162},{"style":161},"--shiki-default:#93A1A1;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-default-font-style:italic;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[163],{"type":24,"value":164},"// used in URL path prefix\n",{"type":19,"tag":107,"props":166,"children":168},{"class":109,"line":167},3,[169,174,179,183,187],{"type":19,"tag":107,"props":170,"children":171},{"style":114},[172],{"type":24,"value":173},"  defaultLocale",{"type":19,"tag":107,"props":175,"children":176},{"style":120},[177],{"type":24,"value":178},": ",{"type":19,"tag":107,"props":180,"children":181},{"style":140},[182],{"type":24,"value":143},{"type":19,"tag":107,"props":184,"children":185},{"style":120},[186],{"type":24,"value":148},{"type":19,"tag":107,"props":188,"children":189},{"style":161},[190],{"type":24,"value":191},"// default locale of your project for Nuxt pages and routings\n",{"type":19,"tag":107,"props":193,"children":195},{"class":109,"line":194},4,[196],{"type":19,"tag":107,"props":197,"children":198},{"style":120},[199],{"type":24,"value":200},"}\n",{"type":19,"tag":20,"props":202,"children":203},{},[204,206,212,214,220,222,228,230,235,237,243,245,250,252,257],{"type":24,"value":205},"This means that ",{"type":19,"tag":27,"props":207,"children":209},{"className":208},[],[210],{"type":24,"value":211},"locales",{"type":24,"value":213}," and ",{"type":19,"tag":27,"props":215,"children":217},{"className":216},[],[218],{"type":24,"value":219},"defaultLocale",{"type":24,"value":221}," should be written in ",{"type":19,"tag":27,"props":223,"children":225},{"className":224},[],[226],{"type":24,"value":227},"nuxt.config",{"type":24,"value":229},", while the rest of the ",{"type":19,"tag":27,"props":231,"children":233},{"className":232},[],[234],{"type":24,"value":32},{"type":24,"value":236}," configuration is written in ",{"type":19,"tag":27,"props":238,"children":240},{"className":239},[],[241],{"type":24,"value":242},"i18n.config.ts",{"type":24,"value":244},". This configuration works fine. Previously, I had all the ",{"type":19,"tag":27,"props":246,"children":248},{"className":247},[],[249],{"type":24,"value":32},{"type":24,"value":251}," configuration written in ",{"type":19,"tag":27,"props":253,"children":255},{"className":254},[],[256],{"type":24,"value":242},{"type":24,"value":258},", which caused the issue of not adding routes for other languages.",{"type":19,"tag":20,"props":260,"children":261},{},[262,267],{"type":19,"tag":27,"props":263,"children":265},{"className":264},[],[266],{"type":24,"value":32},{"type":24,"value":268}," has several routing strategies, and I am using the default strategy here.",{"type":19,"tag":48,"props":270,"children":272},{"id":271},"nuxt-generate",[273],{"type":24,"value":274},"nuxt generate",{"type":19,"tag":20,"props":276,"children":277},{},[278,280,285,287,292],{"type":24,"value":279},"There was a bug in the ",{"type":19,"tag":27,"props":281,"children":283},{"className":282},[],[284],{"type":24,"value":32},{"type":24,"value":286}," version I used these days. When running ",{"type":19,"tag":27,"props":288,"children":290},{"className":289},[],[291],{"type":24,"value":274},{"type":24,"value":293},", an error occurred. Installing the latest version fixed the issue.",{"type":19,"tag":97,"props":295,"children":299},{"className":296,"code":297,"language":298,"meta":8,"style":8},"language-json shiki shiki-themes solarized-light github-dark monokai","\"@nuxtjs/i18n\": \"npm:@nuxtjs/i18n-edge\"\n\n","json",[300],{"type":19,"tag":27,"props":301,"children":302},{"__ignoreMap":8},[303],{"type":19,"tag":107,"props":304,"children":305},{"class":109,"line":110},[306,311,315],{"type":19,"tag":107,"props":307,"children":308},{"style":140},[309],{"type":24,"value":310},"\"@nuxtjs/i18n\"",{"type":19,"tag":107,"props":312,"children":313},{"style":120},[314],{"type":24,"value":178},{"type":19,"tag":107,"props":316,"children":317},{"style":140},[318],{"type":24,"value":319},"\"npm:@nuxtjs/i18n-edge\"\n",{"type":19,"tag":48,"props":321,"children":323},{"id":322},"link-component",[324],{"type":24,"value":325},"Link Component",{"type":19,"tag":20,"props":327,"children":328},{},[329,334,336,342,344,350,352,357],{"type":19,"tag":27,"props":330,"children":332},{"className":331},[],[333],{"type":24,"value":32},{"type":24,"value":335}," provides the ",{"type":19,"tag":27,"props":337,"children":339},{"className":338},[],[340],{"type":24,"value":341},"useLocalePath",{"type":24,"value":343}," function for translating links. However, it was cumbersome to import it every time it was used. So, I tried to write a component that could automatically translate links. But halfway through, I discovered that it already exists and is called ",{"type":19,"tag":27,"props":345,"children":347},{"className":346},[],[348],{"type":24,"value":349},"NuxtLinkLocale",{"type":24,"value":351},". I must say, this component is not mentioned on the page where the ",{"type":19,"tag":27,"props":353,"children":355},{"className":354},[],[356],{"type":24,"value":341},{"type":24,"value":358}," function is documented, nor is it included in the navigation menu on the left sidebar.",{"type":19,"tag":360,"props":361,"children":362},"style",{},[363],{"type":24,"value":364},"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":8,"searchDepth":126,"depth":126,"links":366},[367,368,369],{"id":50,"depth":126,"text":53},{"id":271,"depth":126,"text":274},{"id":322,"depth":126,"text":325},"markdown","content:blog:nuxt3 i18n setup.md","content","blog/nuxt3 i18n setup.md","md",1706852441082]