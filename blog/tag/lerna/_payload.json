[{"data":1,"prerenderedAt":553},["Reactive",2],{"content-query-15cRPMWZiE":3},[4],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":9,"description":10,"date":11,"tags":12,"body":15,"_type":548,"_id":549,"_source":550,"_file":551,"_extension":552},"/blog/conventional-changelog-for-lerna-5-and-6","blog",false,"","Conventional Changelog for Lerna 5 and 6","Config lerna with conventional changelog.","2023-03-02 01:09",[13,14],"lerna","tool",{"type":16,"children":17,"toc":545},"root",[18,46,53,58,370,375,488,501,539],{"type":19,"tag":20,"props":21,"children":22},"element","p",{},[23,26,35,37,44],{"type":24,"value":25},"text","Previously, I used ",{"type":19,"tag":27,"props":28,"children":32},"a",{"href":29,"rel":30},"https://github.com/atlassian/cz-lerna-changelog",[31],"nofollow",[33],{"type":24,"value":34},"cz-lerna-changelog",{"type":24,"value":36},". The problem was that the library hasn't been updated for a long time, and it only works for Lerna 3 and earlier versions. So I created ",{"type":19,"tag":27,"props":38,"children":41},{"href":39,"rel":40},"https://github.com/phphe/cz-conventional-changelog-lerna",[31],[42],{"type":24,"value":43},"cz-conventional-changelog-lerna",{"type":24,"value":45},". It works for Lerna 5 and later versions.",{"type":19,"tag":47,"props":48,"children":50},"h2",{"id":49},"usage",[51],{"type":24,"value":52},"Usage",{"type":19,"tag":20,"props":54,"children":55},{},[56],{"type":24,"value":57},"In the project root directory package.json:",{"type":19,"tag":59,"props":60,"children":64},"pre",{"className":61,"code":62,"language":63,"meta":8,"style":8},"language-json shiki shiki-themes solarized-light github-dark monokai","{\n  \"name\": \"root\",\n  \"private\": true,\n  \"workspaces\": [\"packages/*\"],\n  \"devDependencies\": {\n    \"commitizen\": \"^4.1.2\",\n    \"cz-conventional-changelog-lerna\": \"^0.1.0\",\n    \"lerna\": \"^5.0.0\"\n  },\n  \"scripts\": {\n    \"commit\": \"cz\",\n    \"commit-all\": \"git add . && cz\"\n  },\n  \"config\": {\n    \"commitizen\": {\n      \"path\": \"./node_modules/cz-conventional-changelog-lerna\"\n    }\n  }\n}\n","json",[65],{"type":19,"tag":66,"props":67,"children":68},"code",{"__ignoreMap":8},[69,81,107,130,154,168,190,212,230,239,252,274,292,300,313,325,343,352,361],{"type":19,"tag":70,"props":71,"children":74},"span",{"class":72,"line":73},"line",1,[75],{"type":19,"tag":70,"props":76,"children":78},{"style":77},"--shiki-default:#657B83;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[79],{"type":24,"value":80},"{\n",{"type":19,"tag":70,"props":82,"children":84},{"class":72,"line":83},2,[85,91,96,102],{"type":19,"tag":70,"props":86,"children":88},{"style":87},"--shiki-default:#859900;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[89],{"type":24,"value":90},"  \"name\"",{"type":19,"tag":70,"props":92,"children":93},{"style":77},[94],{"type":24,"value":95},": ",{"type":19,"tag":70,"props":97,"children":99},{"style":98},"--shiki-default:#2AA198;--shiki-dark:#9ECBFF;--shiki-sepia:#CFCFC2",[100],{"type":24,"value":101},"\"root\"",{"type":19,"tag":70,"props":103,"children":104},{"style":77},[105],{"type":24,"value":106},",\n",{"type":19,"tag":70,"props":108,"children":110},{"class":72,"line":109},3,[111,116,120,126],{"type":19,"tag":70,"props":112,"children":113},{"style":87},[114],{"type":24,"value":115},"  \"private\"",{"type":19,"tag":70,"props":117,"children":118},{"style":77},[119],{"type":24,"value":95},{"type":19,"tag":70,"props":121,"children":123},{"style":122},"--shiki-default:#B58900;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[124],{"type":24,"value":125},"true",{"type":19,"tag":70,"props":127,"children":128},{"style":77},[129],{"type":24,"value":106},{"type":19,"tag":70,"props":131,"children":133},{"class":72,"line":132},4,[134,139,144,149],{"type":19,"tag":70,"props":135,"children":136},{"style":87},[137],{"type":24,"value":138},"  \"workspaces\"",{"type":19,"tag":70,"props":140,"children":141},{"style":77},[142],{"type":24,"value":143},": [",{"type":19,"tag":70,"props":145,"children":146},{"style":98},[147],{"type":24,"value":148},"\"packages/*\"",{"type":19,"tag":70,"props":150,"children":151},{"style":77},[152],{"type":24,"value":153},"],\n",{"type":19,"tag":70,"props":155,"children":157},{"class":72,"line":156},5,[158,163],{"type":19,"tag":70,"props":159,"children":160},{"style":87},[161],{"type":24,"value":162},"  \"devDependencies\"",{"type":19,"tag":70,"props":164,"children":165},{"style":77},[166],{"type":24,"value":167},": {\n",{"type":19,"tag":70,"props":169,"children":171},{"class":72,"line":170},6,[172,177,181,186],{"type":19,"tag":70,"props":173,"children":174},{"style":87},[175],{"type":24,"value":176},"    \"commitizen\"",{"type":19,"tag":70,"props":178,"children":179},{"style":77},[180],{"type":24,"value":95},{"type":19,"tag":70,"props":182,"children":183},{"style":98},[184],{"type":24,"value":185},"\"^4.1.2\"",{"type":19,"tag":70,"props":187,"children":188},{"style":77},[189],{"type":24,"value":106},{"type":19,"tag":70,"props":191,"children":193},{"class":72,"line":192},7,[194,199,203,208],{"type":19,"tag":70,"props":195,"children":196},{"style":87},[197],{"type":24,"value":198},"    \"cz-conventional-changelog-lerna\"",{"type":19,"tag":70,"props":200,"children":201},{"style":77},[202],{"type":24,"value":95},{"type":19,"tag":70,"props":204,"children":205},{"style":98},[206],{"type":24,"value":207},"\"^0.1.0\"",{"type":19,"tag":70,"props":209,"children":210},{"style":77},[211],{"type":24,"value":106},{"type":19,"tag":70,"props":213,"children":215},{"class":72,"line":214},8,[216,221,225],{"type":19,"tag":70,"props":217,"children":218},{"style":87},[219],{"type":24,"value":220},"    \"lerna\"",{"type":19,"tag":70,"props":222,"children":223},{"style":77},[224],{"type":24,"value":95},{"type":19,"tag":70,"props":226,"children":227},{"style":98},[228],{"type":24,"value":229},"\"^5.0.0\"\n",{"type":19,"tag":70,"props":231,"children":233},{"class":72,"line":232},9,[234],{"type":19,"tag":70,"props":235,"children":236},{"style":77},[237],{"type":24,"value":238},"  },\n",{"type":19,"tag":70,"props":240,"children":242},{"class":72,"line":241},10,[243,248],{"type":19,"tag":70,"props":244,"children":245},{"style":87},[246],{"type":24,"value":247},"  \"scripts\"",{"type":19,"tag":70,"props":249,"children":250},{"style":77},[251],{"type":24,"value":167},{"type":19,"tag":70,"props":253,"children":255},{"class":72,"line":254},11,[256,261,265,270],{"type":19,"tag":70,"props":257,"children":258},{"style":87},[259],{"type":24,"value":260},"    \"commit\"",{"type":19,"tag":70,"props":262,"children":263},{"style":77},[264],{"type":24,"value":95},{"type":19,"tag":70,"props":266,"children":267},{"style":98},[268],{"type":24,"value":269},"\"cz\"",{"type":19,"tag":70,"props":271,"children":272},{"style":77},[273],{"type":24,"value":106},{"type":19,"tag":70,"props":275,"children":277},{"class":72,"line":276},12,[278,283,287],{"type":19,"tag":70,"props":279,"children":280},{"style":87},[281],{"type":24,"value":282},"    \"commit-all\"",{"type":19,"tag":70,"props":284,"children":285},{"style":77},[286],{"type":24,"value":95},{"type":19,"tag":70,"props":288,"children":289},{"style":98},[290],{"type":24,"value":291},"\"git add . && cz\"\n",{"type":19,"tag":70,"props":293,"children":295},{"class":72,"line":294},13,[296],{"type":19,"tag":70,"props":297,"children":298},{"style":77},[299],{"type":24,"value":238},{"type":19,"tag":70,"props":301,"children":303},{"class":72,"line":302},14,[304,309],{"type":19,"tag":70,"props":305,"children":306},{"style":87},[307],{"type":24,"value":308},"  \"config\"",{"type":19,"tag":70,"props":310,"children":311},{"style":77},[312],{"type":24,"value":167},{"type":19,"tag":70,"props":314,"children":316},{"class":72,"line":315},15,[317,321],{"type":19,"tag":70,"props":318,"children":319},{"style":87},[320],{"type":24,"value":176},{"type":19,"tag":70,"props":322,"children":323},{"style":77},[324],{"type":24,"value":167},{"type":19,"tag":70,"props":326,"children":328},{"class":72,"line":327},16,[329,334,338],{"type":19,"tag":70,"props":330,"children":331},{"style":87},[332],{"type":24,"value":333},"      \"path\"",{"type":19,"tag":70,"props":335,"children":336},{"style":77},[337],{"type":24,"value":95},{"type":19,"tag":70,"props":339,"children":340},{"style":98},[341],{"type":24,"value":342},"\"./node_modules/cz-conventional-changelog-lerna\"\n",{"type":19,"tag":70,"props":344,"children":346},{"class":72,"line":345},17,[347],{"type":19,"tag":70,"props":348,"children":349},{"style":77},[350],{"type":24,"value":351},"    }\n",{"type":19,"tag":70,"props":353,"children":355},{"class":72,"line":354},18,[356],{"type":19,"tag":70,"props":357,"children":358},{"style":77},[359],{"type":24,"value":360},"  }\n",{"type":19,"tag":70,"props":362,"children":364},{"class":72,"line":363},19,[365],{"type":19,"tag":70,"props":366,"children":367},{"style":77},[368],{"type":24,"value":369},"}\n",{"type":19,"tag":20,"props":371,"children":372},{},[373],{"type":24,"value":374},"lerna.json:",{"type":19,"tag":59,"props":376,"children":378},{"className":61,"code":377,"language":63,"meta":8,"style":8},"{\n  \"packages\": [\"packages/*\"],\n  \"command\": {\n    \"version\": {\n      \"conventionalCommits\": true\n    }\n  },\n  \"version\": \"independent\"\n}\n",[379],{"type":19,"tag":66,"props":380,"children":381},{"__ignoreMap":8},[382,389,409,421,433,450,457,464,481],{"type":19,"tag":70,"props":383,"children":384},{"class":72,"line":73},[385],{"type":19,"tag":70,"props":386,"children":387},{"style":77},[388],{"type":24,"value":80},{"type":19,"tag":70,"props":390,"children":391},{"class":72,"line":83},[392,397,401,405],{"type":19,"tag":70,"props":393,"children":394},{"style":87},[395],{"type":24,"value":396},"  \"packages\"",{"type":19,"tag":70,"props":398,"children":399},{"style":77},[400],{"type":24,"value":143},{"type":19,"tag":70,"props":402,"children":403},{"style":98},[404],{"type":24,"value":148},{"type":19,"tag":70,"props":406,"children":407},{"style":77},[408],{"type":24,"value":153},{"type":19,"tag":70,"props":410,"children":411},{"class":72,"line":109},[412,417],{"type":19,"tag":70,"props":413,"children":414},{"style":87},[415],{"type":24,"value":416},"  \"command\"",{"type":19,"tag":70,"props":418,"children":419},{"style":77},[420],{"type":24,"value":167},{"type":19,"tag":70,"props":422,"children":423},{"class":72,"line":132},[424,429],{"type":19,"tag":70,"props":425,"children":426},{"style":87},[427],{"type":24,"value":428},"    \"version\"",{"type":19,"tag":70,"props":430,"children":431},{"style":77},[432],{"type":24,"value":167},{"type":19,"tag":70,"props":434,"children":435},{"class":72,"line":156},[436,441,445],{"type":19,"tag":70,"props":437,"children":438},{"style":87},[439],{"type":24,"value":440},"      \"conventionalCommits\"",{"type":19,"tag":70,"props":442,"children":443},{"style":77},[444],{"type":24,"value":95},{"type":19,"tag":70,"props":446,"children":447},{"style":122},[448],{"type":24,"value":449},"true\n",{"type":19,"tag":70,"props":451,"children":452},{"class":72,"line":170},[453],{"type":19,"tag":70,"props":454,"children":455},{"style":77},[456],{"type":24,"value":351},{"type":19,"tag":70,"props":458,"children":459},{"class":72,"line":192},[460],{"type":19,"tag":70,"props":461,"children":462},{"style":77},[463],{"type":24,"value":238},{"type":19,"tag":70,"props":465,"children":466},{"class":72,"line":214},[467,472,476],{"type":19,"tag":70,"props":468,"children":469},{"style":87},[470],{"type":24,"value":471},"  \"version\"",{"type":19,"tag":70,"props":473,"children":474},{"style":77},[475],{"type":24,"value":95},{"type":19,"tag":70,"props":477,"children":478},{"style":98},[479],{"type":24,"value":480},"\"independent\"\n",{"type":19,"tag":70,"props":482,"children":483},{"class":72,"line":232},[484],{"type":19,"tag":70,"props":485,"children":486},{"style":77},[487],{"type":24,"value":369},{"type":19,"tag":20,"props":489,"children":490},{},[491,493,499],{"type":24,"value":492},"When submitting a git commit, first add changes to the buffer (git add), then execute ",{"type":19,"tag":66,"props":494,"children":496},{"className":495},[],[497],{"type":24,"value":498},"npm run commit",{"type":24,"value":500},", fill in the information according to the prompts and complete the submission.",{"type":19,"tag":20,"props":502,"children":503},{},[504,506,512,514,520,522,528,530,537],{"type":24,"value":505},"When executing ",{"type":19,"tag":66,"props":507,"children":509},{"className":508},[],[510],{"type":24,"value":511},"lerna version",{"type":24,"value":513}," or ",{"type":19,"tag":66,"props":515,"children":517},{"className":516},[],[518],{"type":24,"value":519},"lerna publish",{"type":24,"value":521},", ",{"type":19,"tag":66,"props":523,"children":525},{"className":524},[],[526],{"type":24,"value":527},"CHANGELOG.md",{"type":24,"value":529}," will be automatically generated in each package directory. You can refer to my project: ",{"type":19,"tag":27,"props":531,"children":534},{"href":532,"rel":533},"https://github.com/phphe/he-tree",[31],[535],{"type":24,"value":536},"he-tree: Vue draggable tree component",{"type":24,"value":538},".",{"type":19,"tag":540,"props":541,"children":542},"style",{},[543],{"type":24,"value":544},"html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":8,"searchDepth":83,"depth":83,"links":546},[547],{"id":49,"depth":83,"text":52},"markdown","content:blog:Conventional Changelog for Lerna 5 and 6.md","content","blog/Conventional Changelog for Lerna 5 and 6.md","md",1706852441300]